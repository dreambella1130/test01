/* 공통구분 */
CREATE TABLE GUBUN (
	GUBUN_SID NUMBER NOT NULL, /* 구분번호 */
	GUBUN_CATE VARCHAR2(60) NOT NULL, /* 구분_대분류 */
	GUBUN_DETAIL VARCHAR2(150) NOT NULL, /* 구분_소분류 */
	GUBUN_REGI DATE, /* 구분_등록일 */
	GUBUN_UPDT DATE /* 구분_수정일 */
);

COMMENT ON TABLE GUBUN IS '공통구분';

COMMENT ON COLUMN GUBUN.GUBUN_SID IS '구분번호';

COMMENT ON COLUMN GUBUN.GUBUN_CATE IS '구분_대분류';

COMMENT ON COLUMN GUBUN.GUBUN_DETAIL IS '구분_소분류';

COMMENT ON COLUMN GUBUN.GUBUN_REGI IS '구분_등록일';

COMMENT ON COLUMN GUBUN.GUBUN_UPDT IS '구분_수정일';

CREATE UNIQUE INDEX PK_GUBUN
	ON GUBUN (
		GUBUN_SID ASC
	);

ALTER TABLE GUBUN
	ADD
		CONSTRAINT PK_GUBUN
		PRIMARY KEY (
			GUBUN_SID
		);

/* 게시판 */
CREATE TABLE BOARD (
	BD_SID NUMBER NOT NULL, /* 게시판_번호 */
	BD_GRP_SID NUMBER NOT NULL, /* 게시판_그룹번호 */
	BD_GRP_LV NUMBER NOT NULL, /* 게시판_그룹내순서 */
	BD_GRP_DEP NUMBER NOT NULL, /* 게시판_그룹내깊이 */
	GUBUN_SID NUMBER NOT NULL, /* 구분번호 */
	BD_TITLE VARCHAR2(100) NOT NULL, /* 게시판_제목 */
	BD_CONT VARCHAR2(4000), /* 게시판_내용 */
	BD_REGI DATE, /* 게시판_작성날짜 */
	BD_UPDT DATE, /* 게시판_수정날짜 */
	BD_CLI NUMBER, /* 게시판_조회수 */
	BD_DELCK CHAR(1), /* 게시판_삭제여부 */
	BD_LIKE NUMBER, /* 게시판_추천수 */
	BD_BLCK NUMBER, /* 게시판_신고수 */
	MEM_SID NUMBER NOT NULL /* 회원번호 */
);

COMMENT ON TABLE BOARD IS '게시판';

COMMENT ON COLUMN BOARD.BD_SID IS '게시판_번호';

COMMENT ON COLUMN BOARD.BD_GRP_SID IS '게시판_그룹번호';

COMMENT ON COLUMN BOARD.BD_GRP_LV IS '게시판_그룹내순서';

COMMENT ON COLUMN BOARD.BD_GRP_DEP IS '게시판_그룹내깊이';

COMMENT ON COLUMN BOARD.GUBUN_SID IS '구분번호';

COMMENT ON COLUMN BOARD.BD_TITLE IS '게시판_제목';

COMMENT ON COLUMN BOARD.BD_CONT IS '게시판_내용';

COMMENT ON COLUMN BOARD.BD_REGI IS '게시판_작성날짜';

COMMENT ON COLUMN BOARD.BD_UPDT IS '게시판_수정날짜';

COMMENT ON COLUMN BOARD.BD_CLI IS '게시판_조회수';

COMMENT ON COLUMN BOARD.BD_DELCK IS '게시판_삭제여부';

COMMENT ON COLUMN BOARD.BD_LIKE IS '게시판_추천수';

COMMENT ON COLUMN BOARD.BD_BLCK IS '게시판_신고수';

COMMENT ON COLUMN BOARD.MEM_SID IS '회원번호';

CREATE UNIQUE INDEX PK_BOARD
	ON BOARD (
		BD_SID ASC
	);

ALTER TABLE BOARD
	ADD
		CONSTRAINT PK_BOARD
		PRIMARY KEY (
			BD_SID
		);

/* 게시판_첨부 */
CREATE TABLE BD_FILE (
	FILE_SID NUMBER NOT NULL, /* 첨부파일_번호 */
	FILE_ORINAME VARCHAR2(100) NOT NULL, /* 첨부파일_원래이름 */
	FILE_RENAME VARCHAR2(100) NOT NULL, /* 첨부파일_저장이름 */
	FILE_SIZE NUMBER, /* 첨부파일_크기 */
	BD_SID NUMBER NOT NULL /* 게시판_번호 */
);

COMMENT ON TABLE BD_FILE IS '게시판_첨부';

COMMENT ON COLUMN BD_FILE.FILE_SID IS '첨부파일_번호';

COMMENT ON COLUMN BD_FILE.FILE_ORINAME IS '첨부파일_원래이름';

COMMENT ON COLUMN BD_FILE.FILE_RENAME IS '첨부파일_저장이름';

COMMENT ON COLUMN BD_FILE.FILE_SIZE IS '첨부파일_크기';

COMMENT ON COLUMN BD_FILE.BD_SID IS '게시판_번호';

CREATE UNIQUE INDEX PK_BD_FILE
	ON BD_FILE (
		FILE_SID ASC
	);

ALTER TABLE BD_FILE
	ADD
		CONSTRAINT PK_BD_FILE
		PRIMARY KEY (
			FILE_SID
		);

/* 회원정보 */
CREATE TABLE MEM_INFO (
	MEM_SID NUMBER NOT NULL, /* 회원번호 */
	MEM_ID VARCHAR2(40) NOT NULL, /* 회원아이디(이메일) */
	MEM_PW VARCHAR2(50) NOT NULL, /* 회원비밀번호 */
	MEM_NICK VARCHAR2(30), /* 회원별칭 */
	MEM_REGI DATE, /* 회원가입일 */
	MEM_UPDT DATE, /* 회원최근접속일 */
	MEM_BL CHAR(1), /* 회원BL여부 */
	MEM_GRADE NUMBER /* 회원등급(권한) */
);

COMMENT ON TABLE MEM_INFO IS '회원정보';

COMMENT ON COLUMN MEM_INFO.MEM_SID IS '회원번호';

COMMENT ON COLUMN MEM_INFO.MEM_ID IS '회원아이디(이메일)';

COMMENT ON COLUMN MEM_INFO.MEM_PW IS '회원비밀번호';

COMMENT ON COLUMN MEM_INFO.MEM_NICK IS '회원별칭';

COMMENT ON COLUMN MEM_INFO.MEM_REGI IS '회원가입일';

COMMENT ON COLUMN MEM_INFO.MEM_UPDT IS '회원최근접속일';

COMMENT ON COLUMN MEM_INFO.MEM_BL IS '회원BL여부';

COMMENT ON COLUMN MEM_INFO.MEM_GRADE IS '회원등급(권한)';

CREATE UNIQUE INDEX PK_MEM_INFO
	ON MEM_INFO (
		MEM_SID ASC
	);

ALTER TABLE MEM_INFO
	ADD
		CONSTRAINT PK_MEM_INFO
		PRIMARY KEY (
			MEM_SID
		);

/* 게시판 댓글 */
CREATE TABLE BD_REPL (
	REPL_SID NUMBER NOT NULL, /* 댓글 번호 */
	REPL_GRP NUMBER NOT NULL, /* 댓글그룹 */
	REPL_LV NUMBER NOT NULL, /* 댓글그룹내순서 */
	REPL_DEPT NUMBER NOT NULL, /* 댓글그룹내깊이 */
	REPL_CONT NVARCHAR2(150), /* 댓글내용 */
	REPL_REGI DATE, /* 댓글등록일 */
	REPL_UPDT DATE, /* 댓글수정일 */
	REPL_DELCK CHAR(1), /* 댓글삭제여부 */
	REPL_BLCK NUMBER, /* 댓글신고수 */
	BD_SID NUMBER NOT NULL, /* 게시판_번호 */
	MEM_SID NUMBER NOT NULL /* 회원번호 */
);

COMMENT ON TABLE BD_REPL IS '게시판 댓글';

COMMENT ON COLUMN BD_REPL.REPL_SID IS '댓글 번호';

COMMENT ON COLUMN BD_REPL.REPL_GRP IS '댓글그룹';

COMMENT ON COLUMN BD_REPL.REPL_LV IS '댓글그룹내순서';

COMMENT ON COLUMN BD_REPL.REPL_DEPT IS '댓글그룹내깊이';

COMMENT ON COLUMN BD_REPL.REPL_CONT IS '댓글내용';

COMMENT ON COLUMN BD_REPL.REPL_REGI IS '댓글등록일';

COMMENT ON COLUMN BD_REPL.REPL_UPDT IS '댓글수정일';

COMMENT ON COLUMN BD_REPL.REPL_DELCK IS '댓글삭제여부';

COMMENT ON COLUMN BD_REPL.REPL_BLCK IS '댓글신고수';

COMMENT ON COLUMN BD_REPL.BD_SID IS '게시판_번호';

COMMENT ON COLUMN BD_REPL.MEM_SID IS '회원번호';

CREATE UNIQUE INDEX PK_BD_REPL
	ON BD_REPL (
		REPL_SID ASC
	);

ALTER TABLE BD_REPL
	ADD
		CONSTRAINT PK_BD_REPL
		PRIMARY KEY (
			REPL_SID
		);

ALTER TABLE BOARD
	ADD
		CONSTRAINT FK_GUBUN_TO_BOARD
		FOREIGN KEY (
			GUBUN_SID
		)
		REFERENCES GUBUN (
			GUBUN_SID
		);

ALTER TABLE BOARD
	ADD
		CONSTRAINT FK_MEM_INFO_TO_BOARD
		FOREIGN KEY (
			MEM_SID
		)
		REFERENCES MEM_INFO (
			MEM_SID
		);

ALTER TABLE BD_FILE
	ADD
		CONSTRAINT FK_BOARD_TO_BD_FILE
		FOREIGN KEY (
			BD_SID
		)
		REFERENCES BOARD (
			BD_SID
		);

ALTER TABLE BD_REPL
	ADD
		CONSTRAINT FK_BOARD_TO_BD_REPL
		FOREIGN KEY (
			BD_SID
		)
		REFERENCES BOARD (
			BD_SID
		);

ALTER TABLE BD_REPL
	ADD
		CONSTRAINT FK_MEM_INFO_TO_BD_REPL
		FOREIGN KEY (
			MEM_SID
		)
		REFERENCES MEM_INFO (
			MEM_SID
		);

-- 회원정보 번호 시퀀스 생성
CREATE SEQUENCE SEQ_MEM_INFO START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE;
-- 공통구분 번호 시퀀스 생성
CREATE SEQUENCE SEQ_GUBUN START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE;
-- 게시판 번호 시퀀스 생성
CREATE SEQUENCE SEQ_BOARD START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE;
-- 게시판 댓글 시퀀스 생성
CREATE SEQUENCE SEQ_BD_REPL START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE;
-- 게시판 첨부 시퀀스 생성
CREATE SEQUENCE SEQ_BD_FILE START WITH 1 INCREMENT BY 1 NOMAXVALUE NOCACHE;